<div class="min-h-screen bg-gradient-to-br from-[#0f172a] to-[#1e293b] text-slate-100 relative grid place-items-center">
  <div class="pointer-events-none absolute inset-0 opacity-[0.03] [background-image:url('https://grainy-gradients.vercel.app/noise.svg')]"></div>

  <div class="relative w-full max-w-md p-4">
    
    <div class="rounded-2xl border border-slate-600/30 bg-gradient-to-b from-slate-800/80 to-slate-900/80 p-8 shadow-2xl backdrop-blur-sm">
      
      <div class="text-center mb-6">
        <h1 class="text-2xl font-bold bg-gradient-to-r from-amber-400 to-orange-400 bg-clip-text text-transparent">
          E-mail megerősítés
        </h1>
      </div>

      <ng-container [ngSwitch]="state">

        <div *ngSwitchCase="'loading'" class="flex flex-col items-center justify-center py-6 space-y-4">
          <i class="bi bi-arrow-repeat animate-spin text-5xl text-amber-400"></i>
          <p class="text-slate-300 text-sm animate-pulse">{{ msg }}</p>
        </div>

        <div *ngSwitchCase="'success'" class="flex flex-col items-center justify-center space-y-6 py-2">
          <div class="rounded-full bg-emerald-500/10 p-4 ring-1 ring-emerald-500/30">
            <i class="bi bi-check-circle-fill text-5xl text-emerald-400"></i>
          </div>
          <div class="text-center">
            <p class="text-lg font-medium text-slate-100">{{ msg }}</p>
            <p class="text-sm text-slate-400 mt-1">A fiókod mostantól aktív.</p>
          </div>
          
          <a routerLink="/profile" 
             class="w-full flex items-center justify-center gap-2 rounded-xl bg-gradient-to-r from-emerald-600 to-green-600 px-6 py-3 text-sm font-semibold text-white shadow-lg transition-all hover:from-emerald-500 hover:to-green-500 hover:shadow-emerald-500/25">
            Tovább a profilra <i class="bi bi-arrow-right"></i>
          </a>
        </div>

        <div *ngSwitchCase="'expired'" class="flex flex-col items-center justify-center space-y-6 py-2">
          <div class="rounded-full bg-amber-500/10 p-4 ring-1 ring-amber-500/30">
            <i class="bi bi-hourglass-split text-5xl text-amber-400"></i>
          </div>
          
          <div class="text-center">
            <p class="text-lg font-medium text-slate-100">A link lejárt</p>
            <p class="text-sm text-slate-400 mt-1">{{ msg }}</p>
          </div>

          <div class="w-full space-y-3">
            <button (click)="resend()" [disabled]="isSending"
                    class="w-full flex items-center justify-center gap-2 rounded-xl bg-gradient-to-r from-amber-600 to-orange-600 px-6 py-3 text-sm font-semibold text-white shadow-lg transition-all hover:from-amber-500 hover:to-orange-500 disabled:opacity-50 disabled:cursor-not-allowed">
              <span *ngIf="!isSending"><i class="bi bi-send-fill mr-1"></i> Új megerősítő e-mail kérése</span>
              <span *ngIf="isSending" class="flex items-center gap-2"><i class="bi bi-arrow-repeat animate-spin"></i> Küldés...</span>
            </button>
            
            <div *ngIf="resendOk" class="rounded-lg bg-emerald-500/10 border border-emerald-500/20 p-3 text-center">
              <p class="text-emerald-400 text-sm flex items-center justify-center gap-2">
                <i class="bi bi-check-circle"></i> {{ resendOk }}
              </p>
            </div>
            
            <div *ngIf="resendErr" class="rounded-lg bg-rose-500/10 border border-rose-500/20 p-3 text-center">
              <p class="text-rose-400 text-sm flex items-center justify-center gap-2">
                <i class="bi bi-exclamation-circle"></i> {{ resendErr }}
              </p>
            </div>
          </div>
        </div>

        <div *ngSwitchCase="'invalid'" class="flex flex-col items-center justify-center space-y-6 py-2">
          <ng-container *ngTemplateOutlet="errorTemplate; context: { icon: 'bi-link-45deg', color: 'text-rose-400', ring: 'ring-rose-500/30', bg: 'bg-rose-500/10' }"></ng-container>
        </div>

        <div *ngSwitchCase="'error'" class="flex flex-col items-center justify-center space-y-6 py-2">
           <ng-container *ngTemplateOutlet="errorTemplate; context: { icon: 'bi-exclamation-triangle-fill', color: 'text-rose-400', ring: 'ring-rose-500/30', bg: 'bg-rose-500/10' }"></ng-container>
        </div>

        <ng-template #errorTemplate let-icon="icon" let-color="color" let-ring="ring" let-bg="bg">
          <div [class]="'rounded-full p-4 ring-1 ' + bg + ' ' + ring">
            <i [class]="'bi text-5xl ' + icon + ' ' + color"></i>
          </div>
          <div class="text-center">
            <p class="text-lg font-medium text-slate-100">Hiba történt</p>
            <p class="text-sm text-slate-400 mt-1">{{ msg }}</p>
          </div>
          <a routerLink="/" class="text-sm text-amber-400 hover:text-amber-300 transition-colors underline decoration-amber-400/30 underline-offset-4">
            Vissza a főoldalra
          </a>
        </ng-template>

      </ng-container>
    </div>

  </div>
</div>