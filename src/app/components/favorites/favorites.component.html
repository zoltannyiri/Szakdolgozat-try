<div
  class="min-h-screen bg-gradient-to-br from-slate-50 to-white text-slate-900 relative">
  <div
    class="pointer-events-none absolute inset-0 opacity-[0.06] [background-image:url('https://grainy-gradients.vercel.app/noise.svg')]"></div>

  <div class="relative mx-auto max-w-7xl px-4 py-8">
    <!-- Header -->
    <section
      class="mb-8 rounded-3xl border border-slate-200 bg-white p-6 shadow-[0_10px_40px_rgba(15,23,42,0.06)]">
      <div class="flex items-center justify-between gap-4">
        <div class="flex items-center gap-3">
          <div
            class="grid h-10 w-10 place-items-center rounded-xl bg-gradient-to-tr from-indigo-500 to-sky-500 text-white shadow-[0_12px_30px_-12px_rgba(37,99,235,0.5)]">

            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5"
              viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
            </svg>
          </div>
          <div>
            <h1
              class="text-xl font-semibold tracking-tight text-slate-900">Kedvenc
              loopjaid</h1>
          </div>
        </div>

        <div
          class="rounded-2xl border border-slate-200 bg-white px-4 py-2 text-sm font-medium text-slate-700">
          Összesen: <span class="font-semibold">{{ favoriteLoops.length
            }}</span>
        </div>
      </div>
    </section>

    <!-- Loading -->
    <div *ngIf="isLoading"
      class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3">
      <div *ngFor="let i of [0,1,2,3,4,5]"
        class="rounded-3xl border border-slate-200 bg-white p-6 shadow-[0_10px_40px_rgba(2,6,23,0.07)] animate-pulse">
        <div class="mb-5 h-20 rounded-2xl bg-slate-100"></div>
        <div class="mb-3 h-6 w-2/3 rounded bg-slate-200"></div>
        <div class="h-4 w-1/3 rounded bg-slate-200"></div>
        <div class="mt-5 h-10 rounded-xl bg-slate-100"></div>
      </div>
    </div>

    <!-- Empty -->
    <div *ngIf="!isLoading && favoriteLoops.length === 0"
      class="rounded-3xl border border-slate-200 bg-white p-12 text-center shadow-[0_10px_40px_rgba(2,6,23,0.08)]">
      <div
        class="mx-auto mb-4 grid h-20 w-20 place-items-center rounded-2xl bg-slate-100">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-slate-400"
          viewBox="0 0 24 24" fill="currentColor">
          <path
            d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z" />
        </svg>
      </div>
      <h3 class="mb-2 text-lg font-semibold text-slate-900">Nincs kedvenc</h3>
      <p class="text-sm text-slate-500">Jelölj kedvencnek loopokat a
        galériában.</p>
      <a [routerLink]="['/loops']"
        class="mt-6 inline-flex items-center gap-2 rounded-2xl bg-gradient-to-tr from-indigo-500 to-sky-500 px-5 py-3 text-sm font-semibold text-white shadow-[0_12px_30px_-12px_rgba(37,99,235,0.5)] hover:brightness-110">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5"
          viewBox="0 0 24 24" fill="currentColor">
          <path d="M4 6h16v2H4V6zm0 5h16v2H4v-2zm0 5h10v2H4v-2z" />
        </svg>
        Felfedezés
      </a>
    </div>

    <!-- Cards -->
    <div *ngIf="!isLoading && favoriteLoops.length > 0" class="space-y-6">
      <div *ngFor="let loop of favoriteLoops; trackBy: trackById"
        class="rounded-3xl border border-slate-200 bg-white p-6 shadow-[0_10px_40px_rgba(2,6,23,0.07)] transition-all hover:-translate-y-0.5 hover:shadow-[0_18px_50px_rgba(2,6,23,0.08)]">

        <!-- audio -->
        <audio #audioPlayer
          [id]="'fav-audio-' + loop._id"
          [src]="getAudioUrl(loop.path) || ''"
          hidden
          (play)="onAudioPlay(loop._id)"
          (pause)="onAudioPause()"
          (error)="onAudioError(audioPlayer)"
          (timeupdate)="updateProgress(loop._id)">
        </audio>

        <!-- Fejléc -->
        <div class="mb-6 flex items-start justify-between gap-4">
          <div class="flex-1">
            <div class="mb-3 flex items-center gap-3">
              <h3
                class="cursor-pointer text-xl font-semibold tracking-tight text-slate-900 transition-colors hover:text-indigo-600"
                [routerLink]="['/loop-detail', loop._id]">
                {{ loop.filename || 'Untitled Loop' }}
              </h3>
              <span *ngIf="loop.bpm"
                class="rounded-full bg-indigo-50 px-3 py-1 text-xs font-mono font-medium text-indigo-600 ring-1 ring-inset ring-indigo-200">
                {{ loop.bpm }} BPM
              </span>
            </div>
            <div
              class="flex flex-wrap items-center gap-4 text-sm text-slate-600">
              <span *ngIf="loop.instrument"
                class="inline-flex items-center gap-2">
                <!-- badge icon -->
                <svg xmlns="http://www.w3.org/2000/svg"
                  class="h-4 w-4 text-indigo-500" viewBox="0 0 24 24"
                  fill="currentColor">
                  <path
                    d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3" />
                </svg>
                {{ loop.instrument }}
              </span>
              <span *ngIf="loop.key || loop.scale"
                class="inline-flex items-center gap-2">
                <!-- key/scale icon -->
                <svg xmlns="http://www.w3.org/2000/svg"
                  class="h-4 w-4 text-sky-500" viewBox="0 0 24 24"
                  fill="currentColor">
                  <path
                    d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15.536a5 5 0 001.414 1.414m2.828-9.9a9 9 0 012.728-2.728" />
                </svg>
                {{ loop.key }} {{ loop.scale }}
              </span>
            </div>
          </div>

          <div class="flex items-center gap-2">
            <!-- Like -->
            <button (click)="toggleLike(loop)"
              class="p-2 rounded-full transition-all duration-200 hover:bg-gray-100"
              [class.text-rose-500]="hasLiked(loop)"
              [class.text-gray-400]="!hasLiked(loop)">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5"
                viewBox="0 0 24 24" fill="currentColor" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round"
                  stroke-width="1.5"
                  d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
              </svg>
            </button>
            <span class="text-sm text-slate-500">{{ loop.likes || 0 }}</span>

            <!-- Favorite -->
            <button (click)="removeFavorite(loop._id!)"
              class="p-2 rounded-full transition-colors hover:bg-gray-100"
              title="Eltávolítás a kedvencekből">
              <svg xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5 text-yellow-400" viewBox="0 0 24 24"
                fill="currentColor">
                <path
                  d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" />
              </svg>
            </button>

            <!-- Download -->
            <button (click)="downloadLoop(loop)"
              class="p-2 rounded-full text-gray-500 hover:text-purple-600 hover:bg-gray-100 transition-colors"
              title="Loop letöltése">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6"
                fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round"
                  stroke-width="1.5"
                  d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
              </svg>
            </button>

            <!-- Report / Admin -->
            <ng-container *ngIf="!isAdmin">
              <button (click)="openLoopReportModal(loop._id!)"
                class="p-2 rounded-full text-gray-500 hover:text-red-600 hover:bg-gray-100 transition-colors"
                title="Loop jelentése">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6"
                  fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round"
                    stroke-width="1.5"
                    d="M4 4v16m0-12h12l-3-4 3-4H4z" />
                </svg>
              </button>
            </ng-container>
            <ng-container *ngIf="isAdmin">
              <button (click)="adminDeleteLoop(loop)"
                class="p-2 rounded-full text-gray-500 hover:text-red-600 hover:bg-gray-100 transition-colors"
                title="Loop törlése">
                <!-- törlés -->
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6"
                  viewBox="0 0 24 24" fill="currentColor">
                  <path
                    d="M9 3v1H4v2h16V4h-5V3zM6 7v13a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7z" />
                </svg>
              </button>
              <button (click)="openEditModal(loop)"
                class="p-2 rounded-full text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-colors"
                title="Loop módosítása">
                <!-- szerkesztés -->
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6"
                  viewBox="0 0 24 24" fill="currentColor">
                  <path
                    d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM21 6.34l-3.69-3.69l-1.41 1.41l3.69 3.69L21 6.34z" />
                </svg>
              </button>
            </ng-container>
          </div>
        </div>

        <!-- Címkék -->
        <div *ngIf="loop.tags?.length" class="mb-6 flex flex-wrap gap-2">
          <span *ngFor="let tag of loop.tags"
            class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 border border-gray-200">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 mr-1"
              viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z" />
            </svg>
            {{ tag }}
          </span>
        </div>

        <!-- Player -->
        <div class="rounded-2xl border border-slate-200 bg-white p-4">
          <div
            class="relative mb-4 h-20 cursor-pointer overflow-hidden rounded-xl bg-slate-100 ring-1 ring-inset ring-slate-200"
            (click)="seekAudio($event, loop._id!, true)">
            <!-- háttér waveform -->
            <div class="absolute inset-0 flex items-center opacity-80">
              <div class="flex h-8 w-full items-end">
                <div *ngFor="let v of waveforms[loop._id!] || []"
                  class="mx-0.5 h-full w-1 rounded-sm bg-slate-300 transition-all duration-100"
                  [style.height.%]="v * 0.8"></div>
              </div>
            </div>
            <!-- aktív waveform -->
            <div class="absolute inset-0 flex items-center overflow-hidden"
              [style.width.%]="getProgress(loop._id!)">
              <div class="flex h-8 items-end">
                <div *ngFor="let v of waveforms[loop._id!] || []"
                  class="mx-0.5 h-full w-1 rounded-sm bg-indigo-400 transition-all duration-100"
                  [style.height.%]="v * 0.8"></div>
              </div>
            </div>
            <div class="absolute top-0 bottom-0 ml-1 w-0.5 bg-indigo-500"
              [style.left.%]="getProgress(loop._id!)"></div>
          </div>

          <div class="flex items-center justify-between">
            <!-- Play -->
            <button (click)="togglePlay(loop._id!, audioPlayer)"
              class="flex h-10 w-10 items-center justify-center rounded-full bg-indigo-500 text-white shadow-[0_12px_30px_-12px_rgba(59,130,246,0.6)] transition-all hover:scale-105">
              <svg *ngIf="currentlyPlayingId !== loop._id"
                xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-0.5"
                viewBox="0 0 24 24" fill="currentColor">
                <path d="M8 5v14l11-7z" />
              </svg>
              <svg *ngIf="currentlyPlayingId === loop._id"
                xmlns="http://www.w3.org/2000/svg" class="h-5 w-5"
                viewBox="0 0 24 24" fill="currentColor">
                <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" />
              </svg>
            </button>

            <!-- Timeline -->
            <div class="mx-4 flex flex-1 items-center">
              <span class="w-10 font-mono text-xs text-slate-500">{{
                formatTime(currentPositions[loop._id!]) }}</span>
              <div
                class="relative mx-2 h-2 flex-1 cursor-pointer overflow-hidden rounded-full bg-slate-200"
                (click)="seekAudio($event, loop._id!, false)">
                <div
                  class="absolute inset-y-0 left-0 rounded-full bg-gradient-to-r from-indigo-500 via-sky-500 to-emerald-500"
                  [style.width.%]="getProgress(loop._id!)"></div>
                <div
                  class="absolute top-0 bottom-0 w-0.5 rounded-full bg-slate-900/60"
                  [style.left.%]="getProgress(loop._id!)"></div>
              </div>
              <span class="w-10 font-mono text-xs text-slate-500">{{
                formatTime(durations[loop._id!]) }}</span>
            </div>

            <!-- Volume -->
            <div class="flex items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5 text-slate-500" viewBox="0 0 24 24"
                fill="currentColor">
                <path
                  d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z" />
              </svg>
              <input type="range" min="0" max="1" step="0.01"
                [value]="volumes[loop._id!] || 0.7"
                (input)="setVolume(loop._id!, $any($event.target).value)"
                class="ml-2 h-1 w-24 cursor-pointer appearance-none rounded-full bg-slate-200" />
            </div>
          </div>
        </div>

        <!-- Láb -->
        <div class="mt-5 flex items-center justify-between">
          <a [routerLink]="['/loop-detail', loop._id!]"
            class="inline-flex items-center gap-2 rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 transition-all hover:border-indigo-300/70 hover:bg-indigo-50">
            <!-- info -->
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4"
              viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M12 2a10 10 0 1 0 .001 20.001A10 10 0 0 0 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z" />
            </svg>
            Részletek
          </a>

          <div class="flex gap-2">
            <button (click)="downloadLoop(loop)"
              class="inline-flex items-center gap-2 rounded-2xl bg-gradient-to-tr from-emerald-500 to-teal-500 px-4 py-2 text-sm font-semibold text-white transition-all hover:brightness-110">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4"
                fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round"
                  stroke-width="1.5"
                  d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
              </svg>
              Letöltés
            </button>
            <button (click)="removeFavorite(loop._id!)"
              class="inline-flex items-center gap-2 rounded-2xl bg-gradient-to-tr from-rose-500 to-pink-500 px-4 py-2 text-sm font-semibold text-white transition-all hover:brightness-110">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4"
                viewBox="0 0 24 24" fill="currentColor">
                <path
                  d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" />
              </svg>
              Eltávolítás
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Report Modal -->
    <div *ngIf="isLoopReportModalOpen"
      class="fixed inset-0 z-50 grid place-items-center bg-black bg-opacity-0 p-4"
      (click)="closeLoopReportModal($event)">
      <div
        class="pointer-events-none absolute inset-0 bg-white/40 backdrop-blur-sm"></div>

      <div
        class="relative w-full max-w-md rounded-3xl border border-slate-200 bg-white p-6 shadow-[0_20px_60px_rgba(2,6,23,0.15)]"
        (click)="$event.stopPropagation()">
        <div class="mb-4 flex items-center justify-between">
          <h3 class="text-lg font-semibold text-slate-900">Loop jelentése</h3>
          <button (click)="isLoopReportModalOpen=false"
            class="rounded-xl p-2 text-slate-500 hover:bg-slate-100 hover:text-slate-700">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5"
              viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M18.3 5.71 12 12.01l-6.29-6.3-1.42 1.42 6.3 6.29-6.3 6.29 1.42 1.42 6.29-6.3 6.29 6.3 1.42-1.42-6.3-6.29 6.3-6.29z" />
            </svg>
          </button>
        </div>
        <p class="mb-3 text-sm text-slate-600">Kérlek írd le röviden, mi a
          probléma ezzel a looppal.</p>
        <textarea [(ngModel)]="loopReportReason" rows="5" maxlength="1000"
          class="w-full rounded-xl border border-slate-300 bg-white p-3 text-slate-900 placeholder-slate-400 focus:border-rose-400/70 focus:ring-4 focus:ring-rose-300/30"
          placeholder="Részletek…"></textarea>
        <div *ngIf="loopReportError" class="mt-2 text-sm text-rose-600">{{
          loopReportError }}</div>
        <div *ngIf="loopReportSuccess" class="mt-2 text-sm text-emerald-600">{{
          loopReportSuccess }}</div>
        <div class="mt-4 flex justify-end gap-2">
          <button (click)="isLoopReportModalOpen=false"
            class="inline-flex items-center gap-2 rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 transition-all hover:border-slate-400 hover:bg-slate-50">Mégse</button>
          <button (click)="submitLoopReport()"
            [disabled]="isReportingLoop || !loopReportReason.trim()"
            class="inline-flex items-center gap-2 rounded-2xl bg-gradient-to-tr from-rose-500 to-red-500 px-4 py-2 text-sm font-semibold text-white transition-all hover:brightness-110 disabled:opacity-50">
            {{ isReportingLoop ? 'Küldés…' : 'Jelentés elküldése' }}
          </button>
        </div>
      </div>
    </div>

    <!-- Edit Modal (Admin) -->
    <div *ngIf="isEditModalOpen"
      class="fixed inset-0 z-50 grid place-items-center bg-black bg-opacity-0 p-4"
      (click)="closeEditModal($event)">
      <div
        class="pointer-events-none absolute inset-0 bg-white/40 backdrop-blur-sm"></div>

      <div
        class="relative w-full max-w-lg rounded-3xl border border-slate-200 bg-white p-6 shadow-[0_20px_60px_rgba(2,6,23,0.15)]"
        (click)="$event.stopPropagation()">
        <div class="mb-4 flex items-center justify-between">
          <h3 class="text-lg font-semibold text-slate-900">Loop módosítása</h3>
          <button (click)="isEditModalOpen=false"
            class="rounded-xl p-2 text-slate-500 hover:bg-slate-100 hover:text-slate-700"><svg
              xmlns="http://www.w3.org/2000/svg" class="h-5 w-5"
              viewBox="0 0 24 24" fill="currentColor"><path
                d="M18.3 5.71 12 12.01l-6.29-6.3-1.42 1.42 6.3 6.29-6.3 6.29 1.42 1.42 6.29-6.3 6.29 6.3 1.42-1.42-6.3-6.29 6.3-6.29z" /></svg></button>
        </div>

        <div class="space-y-4">
          <div>
            <label
              class="mb-1 block text-sm font-medium text-slate-700">Név</label>
            <input type="text" [(ngModel)]="editForm.name"
              class="w-full rounded-xl border border-slate-300 bg-white p-3 text-slate-900 focus:border-indigo-400/70 focus:ring-4 focus:ring-indigo-300/30" />
          </div>
          <div class="grid grid-cols-1 gap-4 sm:grid-cols-2">
            <div><label
                class="mb-1 block text-sm font-medium text-slate-700">BPM</label><input
                type="number" [(ngModel)]="editForm.bpm" min="40" max="300"
                class="w-full rounded-xl border border-slate-300 bg-white p-3 text-slate-900 focus:border-indigo-400/70 focus:ring-4 focus:ring-indigo-300/30" /></div>
            <div><label
                class="mb-1 block text-sm font-medium text-slate-700">Hangnem</label><select
                [(ngModel)]="editForm.key"
                class="w-full rounded-xl border border-slate-300 bg-white p-3 text-slate-900 focus:border-indigo-400/70 focus:ring-4 focus:ring-indigo-300/30"><option
                  value>—</option><option *ngFor="let k of keys" [value]="k">{{
                  k }}</option></select></div>
            <div><label
                class="mb-1 block text-sm font-medium text-slate-700">Skála</label><select
                [(ngModel)]="editForm.scale"
                class="w-full rounded-xl border border-slate-300 bg-white p-3 text-slate-900 focus:border-indigo-400/70 focus:ring-4 focus:ring-indigo-300/30"><option
                  value>—</option><option *ngFor="let s of scales"
                  [value]="s">{{ s }}</option></select></div>
            <div><label
                class="mb-1 block text-sm font-medium text-slate-700">Hangszer</label><select
                [(ngModel)]="editForm.instrument"
                class="w-full rounded-xl border border-slate-300 bg-white p-3 text-slate-900 focus:border-indigo-400/70 focus:ring-4 focus:ring-indigo-300/30"><option
                  value>—</option><option *ngFor="let i of instruments"
                  [value]="i">{{ i }}</option></select></div>
          </div>
          <div><label
              class="mb-1 block text-sm font-medium text-slate-700">Címkék
              (vesszővel)</label><input type="text" [(ngModel)]="editForm.tags"
              placeholder="hiphop, trap, dark"
              class="w-full rounded-xl border border-slate-300 bg-white p-3 text-slate-900 placeholder-slate-400 focus:border-indigo-400/70 focus:ring-4 focus:ring-indigo-300/30" /></div>
          <div *ngIf="editError" class="text-sm text-rose-600">{{ editError
            }}</div>
        </div>

        <div class="mt-6 flex justify-end gap-2">
          <button (click)="isEditModalOpen=false"
            class="inline-flex items-center gap-2 rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 transition-all hover:border-slate-400 hover:bg-slate-50">Mégse</button>
          <button (click)="saveLoopEdit()" [disabled]="isSavingEdit"
            class="inline-flex items-center gap-2 rounded-2xl bg-gradient-to-tr from-indigo-500 to-sky-500 px-4 py-2 text-sm font-semibold text-white transition-all hover:brightness-110 disabled:opacity-50">
            {{ isSavingEdit ? 'Mentés…' : 'Mentés' }}
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
